// Generated by LiveScript 1.2.0
(function(){
  var lo, toString$ = {}.toString;
  lo = require('lodash');
  module.exports = function(){
    var countProps, objectEquals, recursivePartialEqual;
    countProps = function(obj){
      var count, i$, len$, k;
      count = 0;
      for (i$ = 0, len$ = obj.length; i$ < len$; ++i$) {
        k = obj[i$];
        if (obj.hasOwnProperty(k)) {
          count++;
        }
      }
      return count;
    };
    objectEquals = function(v1, v2){
      var r, i$, len$, k;
      if (typeof v1 !== typeof v2) {
        return false;
      }
      if (v1 instanceof Object && v2 instanceof Object) {
        if (countProps(v1) !== countProps(v2)) {
          return false;
        }
        r = true;
        for (i$ = 0, len$ = v1.length; i$ < len$; ++i$) {
          k = v1[i$];
          r = objectEquals(v1[k], v2[k]);
          if (!r) {
            return false;
          }
        }
        return true;
      } else {
        return v1 === v2;
      }
    };
    recursivePartialEqual = function(partialObj, compareObj){
      var res, i$, ref$, len$, key, partial, compare, equals;
      res = {};
      if (!(partialObj != null && compareObj != null)) {
        return false;
      }
      if (toString$.call(partialObj).slice(8, -1) === 'Unknown' || toString$.call(compareObj).slice(8, -1) === 'Unknown') {
        return false;
      }
      for (i$ = 0, len$ = (ref$ = lo.keys(partialObj)).length; i$ < len$; ++i$) {
        key = ref$[i$];
        res[key] = false;
        partial = partialObj[key];
        compare = compareObj[key];
        if (partial === 'undefined') {
          continue;
        }
        if (partial instanceof Object && compare instanceof Object) {
          if (compare != null) {
            equals = recursivePartialEqual(partial, compare);
          }
        } else {
          equals = objectEquals(partial, compare);
        }
        if (equals) {
          res[key] = true;
        }
      }
      for (i$ = 0, len$ = (ref$ = lo.keys(partialObj)).length; i$ < len$; ++i$) {
        key = ref$[i$];
        if (!res[key]) {
          return false;
        }
      }
      return true;
    };
    return {
      on: function(partial, obj){
        return recursivePartialEqual(partial, obj);
      }
    };
  };
}).call(this);
