// Generated by LiveScript 1.2.0
(function(){
  var Debugger, PermitFactory, toString$ = {}.toString;
  Debugger = require('../../util').Debugger;
  module.exports = PermitFactory = (function(){
    PermitFactory.displayName = 'PermitFactory';
    var prototype = PermitFactory.prototype, constructor = PermitFactory;
    importAll$(prototype, arguments[0]);
    function PermitFactory(baseClazz, name, baseObj, debugging){
      this.baseClazz = baseClazz;
      this.name = name;
      this.baseObj = baseObj;
      this.debugging = debugging;
      this.configure();
    }
    prototype.configure = function(){
      if (toString$.call(this.baseClazz).slice(8, -1) === 'String') {
        this.baseObj = this.name;
        this.name = this.baseClazz;
        return this.baseClazz = this.defaultPermitClass();
      }
    };
    prototype.defaultPermitClass = function(){
      return this.dpc || (this.dpc = require('../permit'));
    };
    prototype.createPermit = function(){
      return new this.baseClazz(this.name, this.debugging);
    };
    prototype.create = function(){
      return this.permit().init();
    };
    prototype.permit = function(){
      switch (toString$.call(this.baseObj).slice(8, -1)) {
      case 'Object':
        return this.use(this.createPermit(), this.baseObj);
      default:
        return this.createPermit();
      }
    };
    prototype.use = function(permit, obj){
      if (toString$.call(obj).slice(8, -1) === 'Function') {
        obj = obj();
      }
      if (toString$.call(obj).slice(8, -1) === 'Object') {
        return import$(permit, obj);
      } else {
        throw Error("Can only extend permit with an Object, was: " + toString$.call(obj).slice(8, -1));
      }
    };
    return PermitFactory;
  }(Debugger));
  function importAll$(obj, src){
    for (var key in src) obj[key] = src[key];
    return obj;
  }
  function import$(obj, src){
    var own = {}.hasOwnProperty;
    for (var key in src) if (own.call(src, key)) obj[key] = src[key];
    return obj;
  }
}).call(this);
